// ðŸŽ¯ Grading Modal Styles
.grading-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    backdrop-filter: blur(4px);
    padding: var(--space-4);
}

.grading-modal {
    background: var(--bg-surface);
    border-radius: var(--radius-xl);
    max-width: 700px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-2xl);

    .grading-modal-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        padding: var(--space-6);
        border-bottom: 1px solid var(--border-color);
        background: linear-gradient(135deg, var(--primary-50), var(--blue-50));

        @media (prefers-color-scheme: dark) {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(99, 102, 241, 0.1));
        }

        .grading-header-info {
            h2 {
                color: var(--text-primary);
                font-size: var(--font-size-xl);
                font-weight: var(--font-weight-bold);
                margin: 0 0 var(--space-2) 0;
            }

            .grading-assignment-info {
                display: flex;
                flex-direction: column;
                gap: var(--space-1);

                strong {
                    color: var(--primary-600);
                    font-size: var(--font-size-sm);
                }

                span {
                    color: var(--text-secondary);
                    font-size: var(--font-size-xs);
                }
            }
        }

        .grading-modal-close {
            background: none;
            border: none;
            font-size: 24px;
            color: var(--text-secondary);
            cursor: pointer;
            padding: var(--space-2);
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);

            &:hover {
                background: var(--gray-100);
                color: var(--text-primary);
            }

            @media (prefers-color-scheme: dark) {
                &:hover {
                    background: rgba(255, 255, 255, 0.1);
                }
            }
        }
    }

    .grading-modal-content {
        padding: var(--space-6);

        .grading-student-info {
            display: flex;
            align-items: center;
            gap: var(--space-4);
            padding: var(--space-4);
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-6);

            .student-avatar {
                img {
                    width: 60px;
                    height: 60px;
                    border-radius: 50%;
                    object-fit: cover;
                    border: 3px solid var(--primary-200);
                }
            }

            .student-details {
                h3 {
                    color: var(--text-primary);
                    font-size: var(--font-size-lg);
                    font-weight: var(--font-weight-semibold);
                    margin: 0 0 var(--space-1) 0;
                }

                p {
                    color: var(--text-secondary);
                    font-size: var(--font-size-sm);
                    margin: 0 0 var(--space-2) 0;
                }

                .submission-meta {
                    display: flex;
                    gap: var(--space-3);
                    align-items: center;

                    span {
                        font-size: var(--font-size-xs);
                        color: var(--text-secondary);
                    }

                    .late-badge {
                        background: var(--error-100);
                        color: var(--error-700);
                        padding: var(--space-1) var(--space-2);
                        border-radius: var(--radius-md);
                        font-weight: var(--font-weight-medium);

                        @media (prefers-color-scheme: dark) {
                            background: rgba(239, 68, 68, 0.2);
                            color: #fca5a5;
                        }
                    }
                }
            }
        }

        .grading-submission-content {
            margin-bottom: var(--space-6);

            .submission-text {
                margin-bottom: var(--space-4);

                h4 {
                    display: flex;
                    align-items: center;
                    gap: var(--space-2);
                    color: var(--text-primary);
                    font-size: var(--font-size-base);
                    font-weight: var(--font-weight-semibold);
                    margin: 0 0 var(--space-3) 0;
                }

                .text-content {
                    background: var(--bg-primary);
                    padding: var(--space-4);
                    border-radius: var(--radius-lg);
                    border-left: 4px solid var(--primary-500);
                    color: var(--text-primary);
                    line-height: 1.6;
                    white-space: pre-wrap;
                }
            }

            .submission-files {
                h4 {
                    color: var(--text-primary);
                    font-size: var(--font-size-base);
                    font-weight: var(--font-weight-semibold);
                    margin: 0 0 var(--space-3) 0;
                }

                .file-links {
                    display: flex;
                    gap: var(--space-3);
                    flex-wrap: wrap;

                    .file-link {
                        display: inline-flex;
                        align-items: center;
                        gap: var(--space-2);
                        padding: var(--space-2) var(--space-4);
                        background: var(--primary-100);
                        color: var(--primary-700);
                        text-decoration: none;
                        border-radius: var(--radius-lg);
                        font-size: var(--font-size-sm);
                        font-weight: var(--font-weight-medium);
                        transition: all var(--transition-fast);

                        &:hover {
                            background: var(--primary-200);
                            transform: translateY(-1px);
                        }

                        &.external {
                            background: var(--green-100);
                            color: var(--green-700);

                            &:hover {
                                background: var(--green-200);
                            }
                        }

                        @media (prefers-color-scheme: dark) {
                            background: rgba(59, 130, 246, 0.2);
                            color: #93c5fd;

                            &:hover {
                                background: rgba(59, 130, 246, 0.3);
                            }

                            &.external {
                                background: rgba(16, 185, 129, 0.2);
                                color: #6ee7b7;

                                &:hover {
                                    background: rgba(16, 185, 129, 0.3);
                                }
                            }
                        }
                    }
                }
            }
        }

        .grading-form {
            .grading-score-section {
                margin-bottom: var(--space-6);

                .score-input-group {
                    margin-bottom: var(--space-4);

                    label {
                        display: flex;
                        align-items: center;
                        gap: var(--space-2);
                        color: var(--text-primary);
                        font-weight: var(--font-weight-semibold);
                        margin-bottom: var(--space-2);
                    }

                    .score-input-container {
                        display: flex;
                        align-items: center;
                        gap: var(--space-2);

                        .score-input {
                            width: 100px;
                            padding: var(--space-3);
                            border: 2px solid var(--border-color);
                            border-radius: var(--radius-lg);
                            font-size: var(--font-size-lg);
                            font-weight: var(--font-weight-bold);
                            text-align: center;
                            background: var(--bg-surface);
                            color: var(--text-primary);
                            transition: all var(--transition-fast);

                            &:focus {
                                outline: none;
                                border-color: var(--primary-500);
                                box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
                            }
                        }

                        .score-max {
                            color: var(--text-secondary);
                            font-size: var(--font-size-lg);
                            font-weight: var(--font-weight-semibold);
                        }
                    }
                }

                .score-preview {
                    position: relative;
                    background: var(--gray-200);
                    height: 8px;
                    border-radius: var(--radius-full);
                    overflow: hidden;
                    margin-bottom: var(--space-2);

                    @media (prefers-color-scheme: dark) {
                        background: #374151;
                    }

                    .score-bar {
                        height: 100%;
                        border-radius: var(--radius-full);
                        transition: all var(--transition-normal);
                    }

                    .score-percentage {
                        position: absolute;
                        right: 0;
                        top: -30px;
                        color: var(--text-primary);
                        font-size: var(--font-size-sm);
                        font-weight: var(--font-weight-semibold);
                    }
                }
            }

            .grading-feedback-section {
                margin-bottom: var(--space-6);

                label {
                    display: flex;
                    align-items: center;
                    gap: var(--space-2);
                    color: var(--text-primary);
                    font-weight: var(--font-weight-semibold);
                    margin-bottom: var(--space-2);
                }

                .feedback-textarea {
                    width: 100%;
                    padding: var(--space-3);
                    border: 2px solid var(--border-color);
                    border-radius: var(--radius-lg);
                    font-size: var(--font-size-sm);
                    line-height: 1.5;
                    background: var(--bg-surface);
                    color: var(--text-primary);
                    resize: vertical;
                    min-height: 100px;
                    transition: all var(--transition-fast);

                    &:focus {
                        outline: none;
                        border-color: var(--primary-500);
                        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
                    }

                    &::placeholder {
                        color: var(--text-secondary);
                    }
                }
            }

            .grading-actions {
                display: flex;
                gap: var(--space-3);
                justify-content: flex-end;

                .grading-btn {
                    display: flex;
                    align-items: center;
                    gap: var(--space-2);
                    padding: var(--space-3) var(--space-6);
                    border: none;
                    border-radius: var(--radius-lg);
                    font-size: var(--font-size-sm);
                    font-weight: var(--font-weight-medium);
                    cursor: pointer;
                    transition: all var(--transition-fast);

                    &:disabled {
                        opacity: 0.6;
                        cursor: not-allowed;
                    }

                    &.secondary {
                        background: var(--gray-100);
                        color: var(--text-secondary);

                        &:hover:not(:disabled) {
                            background: var(--gray-200);
                            color: var(--text-primary);
                        }

                        @media (prefers-color-scheme: dark) {
                            background: #374151;
                            color: #d1d5db;

                            &:hover:not(:disabled) {
                                background: #4b5563;
                                color: #f9fafb;
                            }
                        }
                    }

                    &.primary {
                        background: var(--success-500);
                        color: white;

                        &:hover:not(:disabled) {
                            background: var(--success-600);
                            transform: translateY(-1px);
                        }
                    }

                    .spinner-small {
                        width: 16px;
                        height: 16px;
                        border: 2px solid transparent;
                        border-top: 2px solid currentColor;
                        border-radius: 50%;
                        animation: spin 1s linear infinite;
                    }
                }
            }
        }
    }
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
